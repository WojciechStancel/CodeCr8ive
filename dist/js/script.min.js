"use strict";var burgerBtn=document.querySelector(".burger-btn"),nav=document.querySelector(".nav"),menuItems=document.querySelectorAll(".nav__link-item"),mobileNav=document.querySelector(".mobile-nav"),mobileNavItems=document.querySelectorAll(".items"),hiddenElements=document.querySelectorAll(".hidden"),buttonBars=document.querySelector(".burger-btn__bars"),allSections=document.querySelectorAll(".section"),accordion=document.querySelector(".accordion"),accordionBtns=document.querySelectorAll(".accordion-btn"),footerYear=document.querySelector(".footer-year"),animation=document.querySelectorAll(".slideIn"),showAnimation=document.querySelectorAll(".showElement"),gallery=document.querySelectorAll(".image-container img"),galleryPopup=document.querySelector(".popup-image"),galleryPopupImg=document.querySelector(".popupPhoto"),closePopup=document.querySelector(".popupPhotoClose"),email=document.getElementById("email"),nameUser=document.getElementById("name"),phone=document.getElementById("phone"),subject=document.getElementById("subject"),msg=document.getElementById("message"),submitBtn=document.getElementById("submitBtn"),popup=document.querySelector(".form-popup"),popupBtn=document.querySelector(".popup-btn");function sectionObserver(){var t=window.scrollY;allSections.forEach(function(e){e.classList.contains("black-btn")&&e.offsetTop<=t+60?buttonBars.classList.add("black-bars-color"):!e.classList.contains("black-btn")&&e.offsetTop<=t+60&&buttonBars.classList.remove("black-bars-color")})}function openAccordion(){var e=this.nextElementSibling;e.classList.contains("active-accordion")?(e.classList.remove("active-accordion"),rotateIcon(this,0)):(closeAccordion(),e.classList.add("active-accordion"),rotateIcon(this,180))}function rotateIcon(e,t){e=e.querySelector(".accordion-btn-icon");e&&(e.style.transform="rotate(".concat(t,"deg)"))}mobileNavItems.forEach(function(e){return e.addEventListener("click",function(){return mobileNav.classList.remove("mobile-nav-active")})}),burgerBtn.addEventListener("click",function(){mobileNav.classList.toggle("mobile-nav-active")}),document.addEventListener("DOMContentLoaded",function(){window.addEventListener("scroll",function(){50<=window.scrollY?nav.classList.add("add-background"):nav.classList.remove("add-background")})});var closeAccordion=function(){document.querySelectorAll(".accordion-info").forEach(function(e){e.classList.remove("active-accordion"),rotateIcon(e.previousElementSibling,0)})},closeAccordionAfterClickOutside=function(e){e.target.classList.contains("accordion-btn-drop")||e.target.classList.contains("accordion-info")||e.target.classList.contains("accordion-info-text")||closeAccordion()},setError=(submitBtn&&(submitBtn.addEventListener("click",function(e){e.preventDefault(),validateInputs(),countErrors()}),popupBtn.addEventListener("click",function(){popup.classList.remove("show-popup")})),function(e,t){e=e.parentElement;e.querySelector(".error").innerText=t,e.classList.add("error"),e.classList.remove("success")}),setSuccess=function(e){e=e.parentElement;e.querySelector(".error").innerText="",e.classList.add("success"),e.classList.remove("error")},isValidEmail=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},validateInputs=function(){var e=nameUser.value.trim(),t=email.value.trim(),o=(phone.value.trim(),msg.value.trim());""===e?setError(nameUser,"Podaj Imię!"):setSuccess(nameUser),""===t?setError(email,"Podaj Email!"):isValidEmail(t)?setSuccess(email):setError(email,"Email jest nieprawidłowy!"),""===subject.value||"Wybierz temat:"===subject.value?setError(subject,"Wybierz temat wiadomości!"):setSuccess(subject),""===o?setError(msg,"Wpisz wiadomość!"):setSuccess(msg),setSuccess(phone)},countErrors=function(){var e=document.querySelectorAll(".error"),t=0;e.forEach(function(e){""!==e.innerText&&t++}),0===t&&popup.classList.add("show-popup")},currentYear=function(){var e=(new Date).getFullYear();footerYear.innerText=e},handleScrollSpy=(currentYear(),Array.prototype.forEach.call(document.querySelectorAll("[data-remove-orphans]"),function(e,t){var o=e.innerHTML;e.innerHTML=o.replace(/(\s)([\S]{1,2})[\s]+/g,"$1$2&nbsp;")}),function(){var c;document.body.classList.contains("main-page")&&(c=[],allSections.forEach(function(e){var t=window.scrollY,o=e.offsetTop-100,n=e.offsetHeight;o<=t&&t<o+n&&(c.push(e),(t=document.querySelector('[href*="'.concat(c[0].id,'"]')))?(menuItems.forEach(function(e){return e.classList.remove("nav-active")}),t.classList.add("nav-active")):menuItems.forEach(function(e){return e.classList.remove("nav-active")}))}))}),closeGalleryPopup=(window.onscroll=function(){animation.forEach(function(e){var t,o=window.scrollY,n=(window.innerWidth<1300?t=e.offsetTop-500:1300<=window.innerWidth&&(t=e.offsetTop-600),e.offsetHeight);t<=o&&o<t+n&&e.classList.add("slide")}),showAnimation.forEach(function(e){var t,o=window.scrollY,n=(window.innerWidth<1300?t=e.offsetTop-500:1300<=window.innerWidth&&(t=e.offsetTop-600),e.offsetHeight);t<=o&&o<t+n&&e.classList.add("show")})},function(e){e.target.classList.contains("show-popup-gallery")&&galleryPopup.classList.remove("show-popup-gallery")});gallery.forEach(function(e){e.addEventListener("click",function(){galleryPopup.classList.add("show-popup-gallery"),galleryPopupImg.src=e.getAttribute("src")})}),closePopup&&closePopup.addEventListener("click",function(){galleryPopup.classList.remove("show-popup-gallery")}),document.addEventListener("DOMContentLoaded",function(){"/index.html"!==window.location.pathname&&!"/"||document.querySelectorAll(".smooth-scroll a").forEach(function(e){e.addEventListener("click",function(e){var t,o=this.getAttribute("href");o.includes("#")&&(o=o.split("#")[1],t=document.getElementById(o))&&(e.preventDefault(),history.pushState(null,null,"#".concat(o)),window.scrollTo({top:t.offsetTop-("aboutme"===o?100:85),behavior:"smooth"}))})})}),window.addEventListener("click",closeGalleryPopup),window.addEventListener("scroll",handleScrollSpy),window.addEventListener("scroll",sectionObserver),window.addEventListener("click",closeAccordionAfterClickOutside),accordionBtns.forEach(function(e){return e.addEventListener("click",openAccordion)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJidXJnZXJCdG4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJuYXYiLCJtZW51SXRlbXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibW9iaWxlTmF2IiwibW9iaWxlTmF2SXRlbXMiLCJoaWRkZW5FbGVtZW50cyIsImJ1dHRvbkJhcnMiLCJhbGxTZWN0aW9ucyIsImFjY29yZGlvbiIsImFjY29yZGlvbkJ0bnMiLCJmb290ZXJZZWFyIiwiYW5pbWF0aW9uIiwic2hvd0FuaW1hdGlvbiIsImdhbGxlcnkiLCJnYWxsZXJ5UG9wdXAiLCJnYWxsZXJ5UG9wdXBJbWciLCJjbG9zZVBvcHVwIiwiZW1haWwiLCJnZXRFbGVtZW50QnlJZCIsIm5hbWVVc2VyIiwicGhvbmUiLCJzdWJqZWN0IiwibXNnIiwic3VibWl0QnRuIiwic2VjdGlvbk9ic2VydmVyIiwiY3VycmVudFNlY3Rpb24iLCJ3aW5kb3ciLCJzY3JvbGxZIiwiZm9yRWFjaCIsInNlY3QiLCJjbGFzc0xpc3QiLCJhZGQiLCJvZmZzZXRUb3AiLCJjb250YWlucyIsImFkZEV2ZW50TGlzdGVuZXIiLCJhY2NvcmRpb25JbmZvIiwicm90YXRlSWNvbiIsInRoaXMiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJyZW1vdmUiLCJidXR0b24iLCJjbG9zZUFjY29yZGlvbiIsInRyYW5zZm9ybSIsImFsbEFjdGl2ZUl0ZW1zIiwiYW5nbGUiLCJpdGVtIiwiaWNvbiIsInN0eWxlIiwiY29uY2F0IiwiZSIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJwcmV2ZW50RGVmYXVsdCIsInZhbGlkYXRlSW5wdXRzIiwiY291bnRFcnJvcnMiLCJpc1ZhbGlkRW1haWwiLCJlcnJvckRpc3BsYXkiLCJtZXNzYWdlIiwiaW5wdXRDb250cm9sIiwicG9wdXBCdG4iLCJpbm5lclRleHQiLCJlbGVtZW50IiwicmUiLCJwYXJlbnRFbGVtZW50IiwiU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJ1c2VyTmFtZVZhbHVlIiwidmFsdWUiLCJlbWFpbFZhbHVlIiwidHJpbSIsInNldEVycm9yIiwic2V0U3VjY2VzcyIsIm1zZ1ZhbHVlIiwicGhvbmVWYWx1ZSIsImFsbEVycm9ycyIsImVycm9yQ291bnQiLCJjdXJyZW50WWVhciIsImhhbmRsZVNjcm9sbFNweSIsImJvZHkiLCJlbCIsIm9mZnNldCIsImFjdGl2ZVNlY3Rpb24iLCJwb3B1cCIsInllYXIiLCJBcnJheSIsInByb3RvdHlwZSIsImNhbGwiLCJpIiwic3RyaW5nIiwiaW5uZXJIVE1MIiwicmVwbGFjZSIsImlubmVyV2lkdGgiLCJ0b3AiLCJzZWN0aW9uIiwib2Zmc2V0SGVpZ2h0IiwiaGVpZ2h0IiwiYW5pbSIsInNlY3Rpb25zIiwicHVzaCIsImlkIiwiY2xvc2VHYWxsZXJ5UG9wdXAiLCJ0YXJnZXQiLCJpbWFnZSIsImlzSW5kZXhQYWdlIiwibGlua3MiLCJnZXRBdHRyaWJ1dGUiLCJocmVmIiwiaW5jbHVkZXMiLCJ0YXJnZXRFbGVtZW50IiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInNjcm9sbE1hcmdpblRvcCIsInNyYyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJsaW5rIiwidGFyZ2V0SWQiLCJzcGxpdCIsInNjcm9sbFRvIiwiYmVoYXZpb3IiLCJjbG9zZUFjY29yZGlvbkFmdGVyQ2xpY2tPdXRzaWRlIiwiYnRuIiwib3BlbkFjY29yZGlvbiJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBTUEsVUFBWUMsU0FBU0MsY0FBYyxhQUFhLEVBQ2hEQyxJQUFNRixTQUFTQyxjQUFjLE1BQU0sRUFEbkNGLFVBQVlDLFNBQVNDLGlCQUFjLGlCQUFjLEVBQ2pEQyxVQUFjRixTQUFDQyxjQUFxQixhQUFBLEVBQ3BDRSxlQUFZSCxTQUFTSSxpQkFBaUIsUUFBQSxFQUN0Q0MsZUFBWUwsU0FBU0MsaUJBQWMsU0FBYyxFQUNqREssV0FBY04sU0FBR0EsY0FBU0ksbUJBQTBCLEVBQ3BERyxZQUFjUCxTQUFXSSxpQkFBaUIsVUFBVSxFQUNwREksVUFBYVIsU0FBU0MsY0FB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QWlCLG1CQUFvQixXQUNJLGdCQUE3QlIsT0FBT3NGLFNBQVNDLFVBQThCLENBQUEsS0FHbkRuSCxTQUFTSSxpQkFBaUIsa0JBQWtCLEVBRXBEMEIsUUFBUSxTQUFDc0YsR0FDZEEsRUFBS2hGLGlCQUFpQixRQUFTLFNBQVVlLEdBQ3hDLElBSU8wRCxFQUpERixFQUFPcEUsS0FBS21FLGFBQWEsTUFBTSxFQUVqQ0MsRUFBS0MsU0FBUyxHQUFHLElBQ2RTLEVBQVdWLEVBQUtXLE1BQU0sR0FBRyxFQUFFLEdBQzNCVCxFQUFnQjdHLFNBQVNvQixlQUFlaUcsQ0FBUSxLQUVyRGxFLEVBQUVFLGVBQWUsRUFFakJ5RCxRQUFRQyxVQUFVLEtBQU0sS0FBSSxJQUFBN0QsT0FBTW1FLENBQVEsQ0FBRSxFQUU1Q3pGLE9BQU8yRixTQUFTLENBQ2YxQixJQUFLZ0IsRUFBYzNFLFdBRmlCLFlBQWJtRixFQUF5QixJQUFNLElBR3RERyxTQUFVLFFBQ1gsQ0FBQyxFQUdKLENBQUMsQ0FDRixDQUFDLENBRUgsQ0FBQyxFQUVENUYsT0FBT1EsaUJBQWlCLFFBQVNpRSxpQkFBaUIsRUFDbER6RSxPQUFPUSxpQkFBaUIsU0FBVTBDLGVBQWUsRUFDakRsRCxPQUFPUSxpQkFBaUIsU0FBVVYsZUFBZSxFQUNqREUsT0FBT1EsaUJBQWlCLFFBQVNxRiwrQkFBK0IsRUFDaEU5RyxjQUFjbUIsUUFBUSxTQUFDNEYsR0FBRyxPQUFLQSxFQUFJdEYsaUJBQWlCLFFBQVN1RixhQUFhLENBQUMsQ0FBQSIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYnVyZ2VyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXItYnRuXCIpO1xuY29uc3QgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZcIik7XG5jb25zdCBtZW51SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdl9fbGluay1pdGVtXCIpO1xuY29uc3QgbW9iaWxlTmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtbmF2XCIpO1xuY29uc3QgbW9iaWxlTmF2SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLml0ZW1zXCIpO1xuY29uc3QgaGlkZGVuRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhpZGRlblwiKTtcbmNvbnN0IGJ1dHRvbkJhcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1cmdlci1idG5fX2JhcnNcIik7XG5jb25zdCBhbGxTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2VjdGlvblwiKTtcbmNvbnN0IGFjY29yZGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWNjb3JkaW9uXCIpO1xuY29uc3QgYWNjb3JkaW9uQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWNjb3JkaW9uLWJ0blwiKTtcbmNvbnN0IGZvb3RlclllYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvb3Rlci15ZWFyXCIpO1xuY29uc3QgYW5pbWF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbGlkZUluXCIpO1xuY29uc3Qgc2hvd0FuaW1hdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2hvd0VsZW1lbnRcIik7XG5jb25zdCBnYWxsZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pbWFnZS1jb250YWluZXIgaW1nXCIpO1xuY29uc3QgZ2FsbGVyeVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1pbWFnZVwiKTtcbmNvbnN0IGdhbGxlcnlQb3B1cEltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBQaG90b1wiKTtcbmNvbnN0IGNsb3NlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwUGhvdG9DbG9zZVwiKTtcbmNvbnN0IGVtYWlsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlbWFpbFwiKTtcbmNvbnN0IG5hbWVVc2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYW1lXCIpO1xuY29uc3QgcGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBob25lXCIpO1xuY29uc3Qgc3ViamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3ViamVjdFwiKTtcbmNvbnN0IG1zZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZVwiKTtcbmNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VibWl0QnRuXCIpO1xuY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tcG9wdXBcIik7XG5jb25zdCBwb3B1cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtYnRuXCIpO1xuXG4vLyBBQ1RJVkUgTU9CSUxFIE5BVlxubW9iaWxlTmF2SXRlbXMuZm9yRWFjaCgoaXRlbSkgPT5cblx0aXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cblx0XHRtb2JpbGVOYXYuY2xhc3NMaXN0LnJlbW92ZShcIm1vYmlsZS1uYXYtYWN0aXZlXCIpXG5cdClcbik7XG5cbmJ1cmdlckJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXHRtb2JpbGVOYXYuY2xhc3NMaXN0LnRvZ2dsZShcIm1vYmlsZS1uYXYtYWN0aXZlXCIpO1xufSk7XG5cbmZ1bmN0aW9uIHNlY3Rpb25PYnNlcnZlcigpIHtcblx0Y29uc3QgY3VycmVudFNlY3Rpb24gPSB3aW5kb3cuc2Nyb2xsWTtcblx0YWxsU2VjdGlvbnMuZm9yRWFjaCgoc2VjdCkgPT4ge1xuXHRcdGlmIChcblx0XHRcdHNlY3QuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYmxhY2stYnRuXCIpICYmXG5cdFx0XHRzZWN0Lm9mZnNldFRvcCA8PSBjdXJyZW50U2VjdGlvbiArIDYwXG5cdFx0KSB7XG5cdFx0XHRidXR0b25CYXJzLmNsYXNzTGlzdC5hZGQoXCJibGFjay1iYXJzLWNvbG9yXCIpO1xuXHRcdH0gZWxzZSBpZiAoXG5cdFx0XHQhc2VjdC5jbGFzc0xpc3QuY29udGFpbnMoXCJibGFjay1idG5cIikgJiZcblx0XHRcdHNlY3Qub2Zmc2V0VG9wIDw9IGN1cnJlbnRTZWN0aW9uICsgNjBcblx0XHQpIHtcblx0XHRcdGJ1dHRvbkJhcnMuY2xhc3NMaXN0LnJlbW92ZShcImJsYWNrLWJhcnMtY29sb3JcIik7XG5cdFx0fVxuXHR9KTtcbn1cblxuLy8gQUREIEJBQ0tHUk9VTkQgVE8gTkFWXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG5cdGNvbnN0IGFkZFNoYWRvdyA9ICgpID0+IHtcblx0XHRpZiAod2luZG93LnNjcm9sbFkgPj0gNTApIHtcblx0XHRcdG5hdi5jbGFzc0xpc3QuYWRkKFwiYWRkLWJhY2tncm91bmRcIik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5hdi5jbGFzc0xpc3QucmVtb3ZlKFwiYWRkLWJhY2tncm91bmRcIik7XG5cdFx0fVxuXHR9O1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGFkZFNoYWRvdyk7XG59KTtcblxuLy8gQUNDT1JESU9OXG5mdW5jdGlvbiBvcGVuQWNjb3JkaW9uKCkge1xuXHRjb25zdCBhY2NvcmRpb25JbmZvID0gdGhpcy5uZXh0RWxlbWVudFNpYmxpbmc7XG5cblx0aWYgKGFjY29yZGlvbkluZm8uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlLWFjY29yZGlvblwiKSkge1xuXHRcdGFjY29yZGlvbkluZm8uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1hY2NvcmRpb25cIik7XG5cdFx0cm90YXRlSWNvbih0aGlzLCAwKTtcblx0fSBlbHNlIHtcblx0XHRjbG9zZUFjY29yZGlvbigpO1xuXHRcdGFjY29yZGlvbkluZm8uY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1hY2NvcmRpb25cIik7XG5cdFx0cm90YXRlSWNvbih0aGlzLCAxODApO1xuXHR9XG59XG5mdW5jdGlvbiByb3RhdGVJY29uKGJ1dHRvbiwgYW5nbGUpIHtcblx0Y29uc3QgaWNvbiA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKFwiLmFjY29yZGlvbi1idG4taWNvblwiKTtcblx0aWYgKGljb24pIHtcblx0XHRpY29uLnN0eWxlLnRyYW5zZm9ybSA9IGByb3RhdGUoJHthbmdsZX1kZWcpYDtcblx0fVxufVxuY29uc3QgY2xvc2VBY2NvcmRpb24gPSAoKSA9PiB7XG5cdGNvbnN0IGFsbEFjdGl2ZUl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hY2NvcmRpb24taW5mb1wiKTtcblx0YWxsQWN0aXZlSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuXHRcdGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1hY2NvcmRpb25cIik7XG5cdFx0cm90YXRlSWNvbihpdGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcsIDApO1xuXHR9KTtcbn07XG5jb25zdCBjbG9zZUFjY29yZGlvbkFmdGVyQ2xpY2tPdXRzaWRlID0gKGUpID0+IHtcblx0aWYgKFxuXHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFjY29yZGlvbi1idG4tZHJvcFwiKSB8fFxuXHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFjY29yZGlvbi1pbmZvXCIpIHx8XG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWNjb3JkaW9uLWluZm8tdGV4dFwiKVxuXHQpIHtcblx0XHRyZXR1cm47XG5cdH1cblx0Y2xvc2VBY2NvcmRpb24oKTtcbn07XG5cbi8vIEVNQUlMIFZBTElEQVRJT05cbmlmIChzdWJtaXRCdG4pIHtcblx0c3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR2YWxpZGF0ZUlucHV0cygpO1xuXHRcdGNvdW50RXJyb3JzKCk7XG5cdH0pO1xuXG5cdHBvcHVwQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdFx0cG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctcG9wdXBcIik7XG5cdH0pO1xufVxuXG5jb25zdCBzZXRFcnJvciA9IChlbGVtZW50LCBtZXNzYWdlKSA9PiB7XG5cdGNvbnN0IGlucHV0Q29udHJvbCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcblx0Y29uc3QgZXJyb3JEaXNwbGF5ID0gaW5wdXRDb250cm9sLnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3JcIik7XG5cblx0ZXJyb3JEaXNwbGF5LmlubmVyVGV4dCA9IG1lc3NhZ2U7XG5cdGlucHV0Q29udHJvbC5jbGFzc0xpc3QuYWRkKFwiZXJyb3JcIik7XG5cdGlucHV0Q29udHJvbC5jbGFzc0xpc3QucmVtb3ZlKFwic3VjY2Vzc1wiKTtcbn07XG5cbmNvbnN0IHNldFN1Y2Nlc3MgPSAoZWxlbWVudCkgPT4ge1xuXHRjb25zdCBpbnB1dENvbnRyb2wgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cdGNvbnN0IGVycm9yRGlzcGxheSA9IGlucHV0Q29udHJvbC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yXCIpO1xuXG5cdGVycm9yRGlzcGxheS5pbm5lclRleHQgPSBcIlwiO1xuXHRpbnB1dENvbnRyb2wuY2xhc3NMaXN0LmFkZChcInN1Y2Nlc3NcIik7XG5cdGlucHV0Q29udHJvbC5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3JcIik7XG59O1xuXG5jb25zdCBpc1ZhbGlkRW1haWwgPSAoZW1haWwpID0+IHtcblx0Y29uc3QgcmUgPVxuXHRcdC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwuKFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG5cdHJldHVybiByZS50ZXN0KFN0cmluZyhlbWFpbCkudG9Mb3dlckNhc2UoKSk7XG59O1xuXG5jb25zdCB2YWxpZGF0ZUlucHV0cyA9ICgpID0+IHtcblx0Y29uc3QgdXNlck5hbWVWYWx1ZSA9IG5hbWVVc2VyLnZhbHVlLnRyaW0oKTtcblx0Y29uc3QgZW1haWxWYWx1ZSA9IGVtYWlsLnZhbHVlLnRyaW0oKTtcblx0Y29uc3QgcGhvbmVWYWx1ZSA9IHBob25lLnZhbHVlLnRyaW0oKTtcblx0Y29uc3QgbXNnVmFsdWUgPSBtc2cudmFsdWUudHJpbSgpO1xuXG5cdGlmICh1c2VyTmFtZVZhbHVlID09PSBcIlwiKSB7XG5cdFx0c2V0RXJyb3IobmFtZVVzZXIsIFwiUG9kYWogSW1pxJkhXCIpO1xuXHR9IGVsc2Uge1xuXHRcdHNldFN1Y2Nlc3MobmFtZVVzZXIpO1xuXHR9XG5cblx0aWYgKGVtYWlsVmFsdWUgPT09IFwiXCIpIHtcblx0XHRzZXRFcnJvcihlbWFpbCwgXCJQb2RhaiBFbWFpbCFcIik7XG5cdH0gZWxzZSBpZiAoIWlzVmFsaWRFbWFpbChlbWFpbFZhbHVlKSkge1xuXHRcdHNldEVycm9yKGVtYWlsLCBcIkVtYWlsIGplc3QgbmllcHJhd2lkxYJvd3khXCIpO1xuXHR9IGVsc2Uge1xuXHRcdHNldFN1Y2Nlc3MoZW1haWwpO1xuXHR9XG5cblx0aWYgKHN1YmplY3QudmFsdWUgPT09IFwiXCIgfHwgc3ViamVjdC52YWx1ZSA9PT0gXCJXeWJpZXJ6IHRlbWF0OlwiKSB7XG5cdFx0c2V0RXJyb3Ioc3ViamVjdCwgXCJXeWJpZXJ6IHRlbWF0IHdpYWRvbW/Fm2NpIVwiKTtcblx0fSBlbHNlIHtcblx0XHRzZXRTdWNjZXNzKHN1YmplY3QpO1xuXHR9XG5cblx0aWYgKG1zZ1ZhbHVlID09PSBcIlwiKSB7XG5cdFx0c2V0RXJyb3IobXNnLCBcIldwaXN6IHdpYWRvbW/Fm8SHIVwiKTtcblx0fSBlbHNlIHtcblx0XHRzZXRTdWNjZXNzKG1zZyk7XG5cdH1cblxuXHRpZiAocGhvbmVWYWx1ZSA9PT0gXCJcIikge1xuXHRcdHNldFN1Y2Nlc3MocGhvbmUpO1xuXHR9IGVsc2Uge1xuXHRcdHNldFN1Y2Nlc3MocGhvbmUpO1xuXHR9XG59O1xuXG5jb25zdCBjb3VudEVycm9ycyA9ICgpID0+IHtcblx0Y29uc3QgYWxsRXJyb3JzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lcnJvclwiKTtcblx0bGV0IGVycm9yQ291bnQgPSAwO1xuXG5cdGFsbEVycm9ycy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdGlmIChlbC5pbm5lclRleHQgIT09IFwiXCIpIHtcblx0XHRcdGVycm9yQ291bnQrKztcblx0XHR9XG5cdH0pO1xuXG5cdGlmIChlcnJvckNvdW50ID09PSAwKSB7XG5cdFx0cG9wdXAuY2xhc3NMaXN0LmFkZChcInNob3ctcG9wdXBcIik7XG5cdH1cbn07XG5cbi8vIEZPT1RFUiBZRUFSXG5jb25zdCBjdXJyZW50WWVhciA9ICgpID0+IHtcblx0Y29uc3QgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcblx0Zm9vdGVyWWVhci5pbm5lclRleHQgPSB5ZWFyO1xufTtcbmN1cnJlbnRZZWFyKCk7XG5cbi8vIFJFTU9WRSBPUlBIQU5TXG5BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKFxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtcmVtb3ZlLW9ycGhhbnNdXCIpLFxuXHRmdW5jdGlvbiAoZWwsIGkpIHtcblx0XHRsZXQgc3RyaW5nID0gZWwuaW5uZXJIVE1MO1xuXHRcdGVsLmlubmVySFRNTCA9IHN0cmluZy5yZXBsYWNlKC8oXFxzKShbXFxTXXsxLDJ9KVtcXHNdKy9nLCBcIiQxJDImbmJzcDtcIik7XG5cdH1cbik7XG5cbi8vIFNDUk9MTFNQWVxuY29uc3QgaGFuZGxlU2Nyb2xsU3B5ID0gKCkgPT4ge1xuXHRpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJtYWluLXBhZ2VcIikpIHtcblx0XHRjb25zdCBzZWN0aW9ucyA9IFtdO1xuXG5cdFx0YWxsU2VjdGlvbnMuZm9yRWFjaCgoc2VjdGlvbikgPT4ge1xuXHRcdFx0bGV0IHRvcCA9IHdpbmRvdy5zY3JvbGxZO1xuXHRcdFx0bGV0IG9mZnNldCA9IHNlY3Rpb24ub2Zmc2V0VG9wIC0gMTAwO1xuXHRcdFx0bGV0IGhlaWdodCA9IHNlY3Rpb24ub2Zmc2V0SGVpZ2h0O1xuXHRcdFx0aWYgKHRvcCA+PSBvZmZzZXQgJiYgdG9wIDwgb2Zmc2V0ICsgaGVpZ2h0KSB7XG5cdFx0XHRcdHNlY3Rpb25zLnB1c2goc2VjdGlvbik7XG5cdFx0XHRcdGNvbnN0IGFjdGl2ZVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0XHRcdGBbaHJlZio9XCIke3NlY3Rpb25zWzBdLmlkfVwiXWBcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRpZiAoYWN0aXZlU2VjdGlvbikge1xuXHRcdFx0XHRcdG1lbnVJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXYtYWN0aXZlXCIpKTtcblx0XHRcdFx0XHRhY3RpdmVTZWN0aW9uLmNsYXNzTGlzdC5hZGQoXCJuYXYtYWN0aXZlXCIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdG1lbnVJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXYtYWN0aXZlXCIpKTtcblx0XHRcdFx0XHQvLyBtZW51SXRlbXNbMF0uY2xhc3NMaXN0LmFkZChcIm5hdi1hY3RpdmVcIik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxufTtcblxuLy8gQU5JTUFUSU9OXG5cbndpbmRvdy5vbnNjcm9sbCA9ICgpID0+IHtcblx0YW5pbWF0aW9uLmZvckVhY2goKGFuaW0pID0+IHtcblx0XHRsZXQgdG9wID0gd2luZG93LnNjcm9sbFk7XG5cdFx0bGV0IG9mZnNldDtcblxuXHRcdGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IDEzMDApIHtcblx0XHRcdG9mZnNldCA9IGFuaW0ub2Zmc2V0VG9wIC0gNTAwO1xuXHRcdH0gZWxzZSBpZiAod2luZG93LmlubmVyV2lkdGggPj0gMTMwMCkge1xuXHRcdFx0b2Zmc2V0ID0gYW5pbS5vZmZzZXRUb3AgLSA2MDA7XG5cdFx0fVxuXG5cdFx0bGV0IGhlaWdodCA9IGFuaW0ub2Zmc2V0SGVpZ2h0O1xuXG5cdFx0aWYgKHRvcCA+PSBvZmZzZXQgJiYgdG9wIDwgb2Zmc2V0ICsgaGVpZ2h0KSB7XG5cdFx0XHRhbmltLmNsYXNzTGlzdC5hZGQoXCJzbGlkZVwiKTtcblx0XHR9XG5cdH0pO1xuXG5cdHNob3dBbmltYXRpb24uZm9yRWFjaCgoYW5pbSkgPT4ge1xuXHRcdGxldCB0b3AgPSB3aW5kb3cuc2Nyb2xsWTtcblx0XHRsZXQgb2Zmc2V0O1xuXG5cdFx0aWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgMTMwMCkge1xuXHRcdFx0b2Zmc2V0ID0gYW5pbS5vZmZzZXRUb3AgLSA1MDA7XG5cdFx0fSBlbHNlIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMzAwKSB7XG5cdFx0XHRvZmZzZXQgPSBhbmltLm9mZnNldFRvcCAtIDYwMDtcblx0XHR9XG5cblx0XHRsZXQgaGVpZ2h0ID0gYW5pbS5vZmZzZXRIZWlnaHQ7XG5cblx0XHRpZiAodG9wID49IG9mZnNldCAmJiB0b3AgPCBvZmZzZXQgKyBoZWlnaHQpIHtcblx0XHRcdGFuaW0uY2xhc3NMaXN0LmFkZChcInNob3dcIik7XG5cdFx0fVxuXHR9KTtcbn07XG5cbi8vIEdBTExFUllcblxuY29uc3QgY2xvc2VHYWxsZXJ5UG9wdXAgPSAoZSkgPT4ge1xuXHRpZiAoIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInNob3ctcG9wdXAtZ2FsbGVyeVwiKSkge1xuXHRcdHJldHVybjtcblx0fSBlbHNlIHtcblx0XHRnYWxsZXJ5UG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctcG9wdXAtZ2FsbGVyeVwiKTtcblx0fVxufTtcblxuZ2FsbGVyeS5mb3JFYWNoKChpbWFnZSkgPT4ge1xuXHRpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXHRcdGdhbGxlcnlQb3B1cC5jbGFzc0xpc3QuYWRkKFwic2hvdy1wb3B1cC1nYWxsZXJ5XCIpO1xuXHRcdGdhbGxlcnlQb3B1cEltZy5zcmMgPSBpbWFnZS5nZXRBdHRyaWJ1dGUoXCJzcmNcIik7XG5cdH0pO1xufSk7XG5cbmlmIChjbG9zZVBvcHVwKSB7XG5cdGNsb3NlUG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblx0XHRnYWxsZXJ5UG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctcG9wdXAtZ2FsbGVyeVwiKTtcblx0fSk7XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcblx0Y29uc3QgaXNJbmRleFBhZ2UgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09IFwiL2luZGV4Lmh0bWxcIiB8fCBcIi9cIjtcblxuXHRpZiAoaXNJbmRleFBhZ2UpIHtcblx0XHRjb25zdCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc21vb3RoLXNjcm9sbCBhXCIpO1xuXG5cdFx0bGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xuXHRcdFx0bGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0Y29uc3QgaHJlZiA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKTtcblxuXHRcdFx0XHRpZiAoaHJlZi5pbmNsdWRlcyhcIiNcIikpIHtcblx0XHRcdFx0XHRjb25zdCB0YXJnZXRJZCA9IGhyZWYuc3BsaXQoXCIjXCIpWzFdO1xuXHRcdFx0XHRcdGNvbnN0IHRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXRJZCk7XG5cdFx0XHRcdFx0aWYgKHRhcmdldEVsZW1lbnQpIHtcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHRcdFx0aGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgYCMke3RhcmdldElkfWApO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsTWFyZ2luVG9wID0gdGFyZ2V0SWQgPT09IFwiYWJvdXRtZVwiID8gMTAwIDogODU7XG5cdFx0XHRcdFx0XHR3aW5kb3cuc2Nyb2xsVG8oe1xuXHRcdFx0XHRcdFx0XHR0b3A6IHRhcmdldEVsZW1lbnQub2Zmc2V0VG9wIC0gc2Nyb2xsTWFyZ2luVG9wLFxuXHRcdFx0XHRcdFx0XHRiZWhhdmlvcjogXCJzbW9vdGhcIixcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlR2FsbGVyeVBvcHVwKTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZVNjcm9sbFNweSk7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBzZWN0aW9uT2JzZXJ2ZXIpO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZUFjY29yZGlvbkFmdGVyQ2xpY2tPdXRzaWRlKTtcbmFjY29yZGlvbkJ0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5BY2NvcmRpb24pKTtcbiJdfQ==
